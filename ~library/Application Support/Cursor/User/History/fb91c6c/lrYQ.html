<!DOCTYPE html>
<html>
<head>
<style>
:root{
--tx: #cdd6f4; /* Text */
--bg: #1e1e2e; /* Base */
--bg-2: #313244; /* Surface 0 */
--fill: #bac2de; /* Subtext 1 */
--fill-hover: #9399b2; /* Overlay 2 */
}

html, body {
 margin: 0px;
 padding: 0px;
 overflow: hidden;
 color: var(--tx);
}

.acrylic {
position: relative;
overflow: hidden;
}

.acrylic::before {
content: '';
position: absolute;
z-index: -1;
top: 0;
right: 0;
bottom: 0;
left: 0;
background-color: rgba(30, 30, 46, 0.7);
filter: blur(8px);
-webkit-filter: blur(8px);
-moz-filter: blur(8px);
-o-filter: blur(8px);
-ms-filter: blur(8px);
background-blend-mode: exclusion;
}

.acrylic::after {
content: "";
position: absolute;
top: 0;
right: 0;
bottom: 0;
left: 0;
z-index: -1;
background-image: url(data:image/png;base64,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);
}

.svg {
float: left;
}

svg {
max-width:50px;
min-width:40px;
width:5%;
height:auto;
fill: var(--fill);
margin:10px;
}

svg:hover {
cursor: pointer;
fill: var(--fill-hover);
}

.modal {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 100; /* Sit on top */
  padding-top: 10px; /* Location of the box */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: auto; /* Enable scroll if needed */
  background-color: rgb(0,0,0); /* Fallback color */
  background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
  box-shadow: none; /* Remove shadow */
}

/* Modal Content */
.modal-content {
  background-color: var(--bg-2);
  margin: auto;
  padding: 20px;
  border: 1px solid #888;
  width: 80%;
  color: var(--tx);
  box-shadow: none; /* Remove shadow */
}

/* The Close Button */
.close {
  color: #bac2de;
  float: right;
  font-size: 28px;
  font-weight: bold;
}

.close:hover,
.close:focus {
  color: #cdd6f4;
  text-decoration: none;
  cursor: pointer;
}

@media (prefers-color-scheme: dark) {

} 

body {
  background-image: url('../../assets/bg.png'); /* Set background image */
  background-size: cover; /* Cover the entire area */
  background-position: center; /* Center the image */
  display: flex; /* Use flexbox for layout */
  justify-content: center; /* Center the game section */
  align-items: flex-start; /* Align items to the top */
  padding: 50px; /* Add padding to the body */
  min-height: 100vh; /* Ensure body takes full height of the viewport */
  margin: 0; /* Remove default margin */
}

#gameSection {
  position: relative; /* Allow absolute positioning of children */
  padding: 5px; /* Inner padding for the game section */
  border-radius: 20px; /* Rounded corners for the game section */
  width: 60%; /* Set width for the game section */
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Optional shadow for depth */
  box-shadow: none; /* Remove shadow */
}

iframe {
  width: 100%; /* Full width of the game section */
  height: 800px; /* Fixed height for the iframe */
  border: none; /* Remove default border */
  border-radius: 15px; /* Rounded corners for the iframe */
  box-shadow: none; /* Remove shadow */
}
</style>
</head>
<body class="acrylic">
<!-- The Modal -->
<div id="myModal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h1>Settings</h1>
    <p>Choose your settings below.</p>
    <hr>

      <label for="windowLock">Ask Before Closing Window:</label>
      <input type="checkbox" id="windowLock" onchange="toggleWindowLock()">
<br>
    <label for="mySlider">Brightness:</label>
    <input type="range" min="10" max="200" value="100" style="width: 200px; background: grey;" id="mySlider" oninput="updateFilters()">
    <br>
    <label for="contrastSlider">Contrast:</label>
    <input type="range" min="0" max="200" value="100" style="width: 200px; background: grey;" id="contrastSlider" oninput="updateFilters()">
    <br>
    <label for="hueSlider">Hue:</label>
    <input type="range" min="0" max="360" value="0" style="width: 200px; background: grey;" id="hueSlider" oninput="updateFilters()">
    <br>
    <label for="blurSlider">Blur:</label>
    <input type="range" min="0" max="10" value="0" step="0.1" style="width: 200px; background: grey;" id="blurSlider" oninput="updateFilters()">
    <br>
    <label for="saturateSlider">Saturate:</label>
    <input type="range" min="0" max="200" value="100" style="width: 200px; background: grey;" id="saturateSlider" oninput="updateFilters()">
    <br>
    <label for="grayscaleSlider">Grayscale:</label>
    <input type="range" min="0" max="100" value="0" style="width: 200px; background: grey;" id="grayscaleSlider" oninput="updateFilters()">
    <br>
    <label for="sepiaSlider">Sepia:</label>
    <input type="range" min="0" max="100" value="0" style="width: 200px; background: grey;" id="sepiaSlider" oninput="updateFilters()">
    <br>
    <label for="invertSlider">Invert:</label>
    <input type="range" min="0" max="100" value="0" style="width: 200px; background: grey;" id="invertSlider" oninput="updateFilters()">
    <br>
    <label for="opacitySlider">Opacity:</label>
    <input type="range" min="0" max="1" value="1" step="0.1" style="width: 200px; background: grey;" id="opacitySlider" oninput="updateFilters()">
    <br>
    <label for="dropShadowSlider">Drop Shadow:</label>
    <input type="range" min="0" max="10" value="0" step="0.1" style="width: 200px; background: grey;" id="dropShadowSlider" oninput="updateFilters()">
  </div>
 </div>
  <script>
    function updateFilters() {
      var brightness = document.getElementById("mySlider").value;
      var contrast = document.getElementById("contrastSlider").value;
      var hue = document.getElementById("hueSlider").value;
      var blur = document.getElementById("blurSlider").value;
      var saturate = document.getElementById("saturateSlider").value;
      var grayscale = document.getElementById("grayscaleSlider").value;
      var sepia = document.getElementById("sepiaSlider").value;
      var invert = document.getElementById("invertSlider").value;
      var opacity = document.getElementById("opacitySlider").value;
      var dropShadow = document.getElementById("dropShadowSlider").value;

      var filterValue = `brightness(${brightness}%) contrast(${contrast}%) hue-rotate(${hue}deg) blur(${blur}px) saturate(${saturate}%) grayscale(${grayscale}%) sepia(${sepia}%) invert(${invert}%)`;
      document.body.style.filter = filterValue;

      document.body.style.opacity = opacity;

      var dropShadowValue = `0 0 ${dropShadow}px rgba(0, 0, 0, 0.5)`;
      document.body.style.boxShadow = dropShadowValue;
    }
    
 function toggleWindowLock() {
  var windowLockCheckbox = document.getElementById("windowLock");
  if (windowLockCheckbox.checked) {
    window.onbeforeunload = function () {
      return "Are you sure you want to leave this page? Your changes may not be saved.";
    };
  } else {
    window.onbeforeunload = null;
  }
}
  </script>
  <script>
function getStoredJSON(key, data) {
 if (data && data.key && (localStorage[key] != 'null')) {
  var inStore = JSON.parse(localStorage[key]);
  if ((typeof inStore == 'object') && inStore.hasOwnProperty(data.key)) {
   return inStore[data.key];
  }
 }
 if (localStorage[key] && !data) {
  return JSON.parse(localStorage[key]);
 }
 return null;
}

function storeJSON(key, data) {
 if (localStorage[key]) {
  var inStore = JSON.parse(localStorage[key]) || {};
  inStore[data.key] = data.value;
  localStorage[key] = JSON.stringify(inStore);
 }else{
  var inStore = {};
  inStore[data.key] = data.value;
  localStorage[key] = JSON.stringify(inStore);
 }
 
 return localStorage[key];
}
  </script>
<script>
var infoMenuDisplay = "top"; //top, bottom, left, right

if (getStoredJSON('gams') && getStoredJSON('gams', {key: 'popoutMode'})) {
 var popoutMode = getStoredJSON('gams', {key: 'popoutMode'});
 infoMenuDisplay = popoutMode;
}

var awayFromSide1 = "left";
var awayFromSide2 = "bottom";
var translateSide = "translateX";
var popOutDistance = "162px";

if (infoMenuDisplay == "top") {
 awayFromSide1 = "left";
 awayFromSide2 = "bottom";
 translateSide = "translateX";
}else if (infoMenuDisplay == "bottom") {
 awayFromSide1 = "left";
 awayFromSide2 = "top";
 translateSide = "translateX";
}else if (infoMenuDisplay == "left") {
 awayFromSide1 = "top";
 awayFromSide2 = "right";
 translateSide = "translateY";
 popOutDistance = "422px";
}else if (infoMenuDisplay == "right") {
 awayFromSide1 = "top";
 awayFromSide2 = "left";
 translateSide = "translateY";
 popOutDistance = "422px";
}

var style = `
.info-menu {
  background-color: var(--bg-2);
  color: var(--tx);
  position: fixed;
  ${awayFromSide1}: 50%;
  ${awayFromSide2}: calc(100% - 10px);
  transform: ${translateSide}(-50%);
  border-radius: 10px;
  height: 140px;
  width: 400px;
  padding: 10px;
  transition: all 1s ease-in-out;
  border: 1px solid;
}

.info-menu:hover {
 ${awayFromSide2}: calc(100% - ${popOutDistance});
}
`;

var styleElm = document.createElement('style');
styleElm.innerHTML = style;
document.body.appendChild(styleElm);
</script>

<!-- Move this header section below the game section -->
<div id="gameSection">
  <iframe src="" onload="this.focus();" id="frame"></iframe>
</div>

<!-- Update the info menu to be always expanded and positioned above the footer -->
<div class="info-menu" style="position: fixed; bottom: 60px; left: 50%; transform: translateX(-50%); padding: 10px; width: 400px; z-index: 1000;">
<img id="icon-img" style="width:50px;height:50px;border-radius:10px;" src="" ondblclick="Function(prompt())()">
<header style="overflow: scroll; height: 80px; width: 340px; float: right; margin-left: 10px;">
<h1 id="name">---</h1>
</header>

<a style='float:left;' href='../../Gams.html' id="backHome"><div title="Back To Home Page" style="max-width:50px;min-width:40px;width:5%;height:auto;margin:10px;"><svg viewBox="0 50 219 248"><g transform="translate(0 248) scale(.1 -.1)">
<path d="m350 1635-315-315 318-317 317-318 67 68 68 67-400 400h883 882v95 95h-887-888l410 410-65 65c-35 36-67 65-70 65s-147-142-320-315z"/></g></svg></div>
</a>

<div class="svg" title="Fullscreen" onclick="openFullscreen('frame')">
<svg viewBox="0 0 385 385"><path d="M385 12a12 12 0 0 0-12-12H264.8c-6.9 0-12 5.4-12 12.2s5.1 11.9 12 11.9h96l-.2 96.5c0 6.8 5.2 12 12 12 6.9 0 12-5.2 12-12l.3-108.4V12zM120.5 0H12.2a12 12 0 0 0-12 12L0 120.4c0 6.8 5.4 12 12.2 12s11.9-5.2 11.9-12l.2-96.3h96.2c6.8 0 12-5.2 12-12 0-6.9-5.2-12.1-12-12.1zm-.4 361h-96v-96.3c0-6.9-5.2-12-12-12S0 257.7 0 264.6v108.3a12 12 0 0 0 12 12h108.1c6.9 0 12-5.3 12-12.2 0-6.8-5.1-11.8-12-11.8zm252.7-108c-6.9 0-11.9 5-11.9 11.8V361h-96.2c-6.9 0-12 5.2-12 12s5.1 12 12 12h108.2a12 12 0 0 0 12-12V265c0-6.9-5.3-12-12.2-12z"></svg>
</div>

<div class="svg" title="Settings" id="settingsButton">
<svg viewBox="0 0 48 48"><path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97l-.75-5.3c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3c-1.22.51-2.35 1.17-3.38 1.97l-4.98-2.01c-.45-.17-.97 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31c-.08.64-.14 1.29-.14 1.95s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3c1.22-.51 2.35-1.17 3.38-1.97l4.98 2.01c.45.17.97 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zm-14.86 5.05c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></svg>
</div>

</div>

<!-- Add this header section below the game section -->
<div id="header" style="position: fixed; bottom: 0; left: 0; width: 100%; display: flex; justify-content: space-around; padding: 10px; background-color: var(--bg-2);">
    <button style="border-radius: 15px; padding: 10px 20px; margin-right: 10px; background-color: #45475a; color: var(--tx); border: none; cursor: pointer;" onclick="window.open('https://www.google.com', '_blank')">Button 1</button>
    <button style="border-radius: 15px; padding: 10px 20px; margin-right: 10px; background-color: #45475a; color: var(--tx); border: none; cursor: pointer;" onclick="window.open('https://launchpad.classlink.com/', '_blank')">Button 2</button>
</div>

<script>
const BroadcastDisguise = new BroadcastChannel('BroadcastDisguise');

var settingsButton = document.getElementById('settingsButton');
var modal = document.getElementById("myModal");

var span = document.getElementsByClassName("close")[0];
settingsButton.onclick = function() {
  modal.style.display = "block";
}
span.onclick = function() {
  modal.style.display = "none";
}
window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
}

function openFullscreen(e){document.getElementById(e).requestFullscreen?document.getElementById(e).requestFullscreen():document.getElementById(e).webkitRequestFullscreen?document.getElementById(e).webkitRequestFullscreen():document.getElementById(e).msRequestFullscreen&&document.getElementById(e).msRequestFullscreen()}


function setFavicon(href) {
  var existFav = document.querySelectorAll('link[rel*="icon"]');
  existFav.forEach(function(favicon) {
    favicon.parentNode.removeChild(favicon);
  });

  var link = document.createElement('link');
  link.type = 'image/x-icon';
  link.rel = 'icon';
  link.href = href;
  document.getElementsByTagName('head')[0].appendChild(link);
}

function l(e){return document.getElementById(e)}
var urlParams = new URLSearchParams(window.location.search);
var name = (urlParams.get('name') || 'Gam');
var icon = (urlParams.get('icon') || '');
var src = (urlParams.get('src') || '');

l("name").innerHTML = name;
document.title = name;

l("icon-img").src = icon;
setFavicon(icon);

l("frame").focus();
l("frame").src = src;
l("frame").focus();

const ogTitle = document.title;
const ogIcon = document.querySelectorAll('link[rel*="icon"]')[0].href;



function applyDisguise() {
 var icon = getStoredJSON('gams', {key: 'icon'});
 var title = getStoredJSON('gams', {key: 'title'});
 if (title) {
  document.title = (title);
 }else{
  document.title = (ogTitle);
 }

 if (icon) {
  setFavicon(icon)
 }else{
  setFavicon(ogIcon)
 }
}

applyDisguise();

BroadcastDisguise.onmessage = () => {
applyDisguise();
};
</script>

<!-- Update the position of the plus icon -->
<script>
    // Use existing urlParams if already declared
    if (typeof urlParams === 'undefined') {
        const urlParams = new URLSearchParams(window.location.search);
    }
    const isPlus = urlParams.get('isPlus') === 'true';

    window.onload = function() {
        if (isPlus) {
            var plusIcon = document.createElement('span'); // Use standard createElement
            plusIcon.className = 'plus-icon'; // Set class
            plusIcon.style.color = 'gold'; // Set color
            plusIcon.style.marginLeft = '5px'; // Set margin
            plusIcon.innerHTML = '+'; // Set inner HTML
            plusIcon.style.position = 'absolute'; // Change to absolute positioning
            plusIcon.style.top = '5px'; // Position it 5px from the top
            plusIcon.style.left = 'calc(100% + 10px)'; // Position it 10px to the right of the iframe
            plusIcon.style.zIndex = '1000'; // Ensure it appears above other elements
            plusIcon.style.fontSize = '2.5em'; // Make it 2.5 times bigger
            document.getElementById('gameSection').appendChild(plusIcon); // Append to gameSection
        }
    };
</script>
</body>
</html>
