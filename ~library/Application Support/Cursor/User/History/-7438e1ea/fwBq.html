<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Grid</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }
        .card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            padding: 15px;
            text-align: center;
        }
        img {
            max-width: 100%;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <h1>Projects</h1>
    <div class="grid" id="projectGrid"></div>

    <script>
        async function fetchProjects() {
            const response = await fetch('https://studio.code.org/api/v1/projects/personal', {
                method: 'GET',
                headers: {
                    'accept': 'application/json, text/javascript, */*; q=0.01',
                    'accept-language': 'en-US,en;q=0.9',
                    'cookie': 'CloudFront-Key-Pair-Id=APKAISANJXLPE5AOQFEQ; language_=en-US; _ga=GA1.1.138872569.1719944144; _ga_L9HT5MZ3HD=GS1.1.1719944143.1.0.1719944143.60.0.0; statsig_stable_id=d299381e-28b7-447b-8602-b54c93759db9; _limit_project_types=false; _user_type=teacher; _shortName=Arcane; _experiments=%5B%22rene-control-affirmation%22%2C%22resources_tab%22%5D; _learn_session=90ec8631358c5136a00217e79a68c5e4; _teacher_locale=en-US; _teacher_account_age_in_years=6; _teacher_grades=%5B%22Other%22%5D; _teacher_curriculums=%5B%22CSD%22%5D; _teacher_has_attended_pd=false; _teacher_within_us=true; CloudFront-Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9zdHVkaW8uY29kZS5vcmcvcmVzdHJpY3RlZC8qIiwiQ29uZGl0aW9uIjp7IkRhdGVMZXNzVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNzIyOTEwNjQ2fX19XX0_; CloudFront-Signature=H250yQfvf3Z9gTiKRfw1BKZXKhJUwEyyTf94xcJj-2xsvGTL0q%7EHi9T-bQIdKY5YGXwK5-1TomkJV3N8VpVzQMieVu211G62V2Gn5ySjZlqa0Ez2%7E4CXcwrlXWGIGMhQjhkSk8s6ZDjk1bd8rnx2SLDWN4uzVuPJyRKEnarIaGR1I7rCO44e1ENFMIWc5uGvgmvZ4lMFC18jCjcHEO8KTZVLWzWsNqXybKhyUyMmowJ%7EU0Uyjuv08BVe%7EL-o8%7EGxgo5Xx8pHzy-TpxyuE7bLDlsChOfP5roTu78vfQoyMUY%7EgdkmVJAPoGTeYUoNasOW45quxdQprMuETJQe1dXEFQ__; AMP_MKTG_efded8aba7=JTdCJTIycmVmZXJyZXIlMjIlM0ElMjJodHRwcyUzQSUyRiUyRnN0dWRpby5jb2RlLm9yZyUyRnByb2plY3RzJTJGcHVibGljJTIyJTJDJTIycmVmZXJyaW5nX2RvbWFpbiUyMiUzQSUyMnN0dWRpby5jb2RlLm9yZyUyMiU3RA==; AMP_efded8aba7=JTdCJTIyb3B0T3V0JTIyJTNBZmFsc2UlMkMlMjJkZXZpY2VJZCUyMiUzQSUyMjI0OTE1YTNiLWQ1MDQtNGVjYy1iNjJmLWEzMGRlZGY2M2U1NiUyMiUyQyUyMmxhc3RFdmVudFRpbWUlMjIlM0ExNzIyODk2NDAxNDgxJTJDJTIyc2Vzc2lvbklkJTIyJTNBMTcyMjg5NjI0NjE4MCUyQyUyMnVzZXJJZCUyMiUzQSUyMjQ1NTA3MDcwJTIyJTdE; AMP_f6db63e17b=JTdCJTIyb3B0T3V0JTIyJTNBZmFsc2UlMkMlMjJkZXZpY2VJZCUyMiUzQSUyMmJmYzhmNWU0LTczNzktNGU2Yy1hMThjLTg4MmJkMTcwYzQ0MiUyMiUyQyUyMnNlc3Npb25JZCUyMiUzQTE3MjMwNzYxNTQ3NzglMkMlMjJ1c2VySWQlMjIlM0ElMjI0NTUwNzA3MCUyMiUyQyUyMmxhc3RFdmVudFRpbWUlMjIlM0ExNzIzMDc2OTI4MDAzJTdE; AMP_f6db63e17b=JTdCJTIyb3B0T3V0JTIyJTNBZmFsc2UlMkMlMjJkZXZpY2VJZCUyMiUzQSUyMmJmYzhmNWU0LTczNzktNGU2Yy1hMThjLTg4MmJkMTcwYzQ0MiUyMiUyQyUyMnNlc3Npb25JZCUyMiUzQTE3MjMwNzYxNTQ3NzglMkMlMjJ1c2VySWQlMjIlM0ElMjI0NTUwNzA3MCUyMiUyQyUyMmxhc3RFdmVudFRpbWUlMjIlM0ExNzI0ODgwOTY3NzIwJTdE; AMP_MKTG_f6db63e17b=JTdCJTdE; _learn_session_levelbuilder=48d5602f77bda4a8c258d4af8f58bd8c; AMP_MKTG_f6db63e17b=JTdCJTdE; OptanonConsent=isGpcEnabled=0&datestamp=Fri+Aug+30+2024+20%3A00%3A37+GMT-0400+(Eastern+Daylight+Time)&version=202306.2.0&browserGpcFlag=0&isIABGlobal=false&hosts=&consentId=f3cf3215-1eca-4a03-b292-23b428a6e963&interactionCount=1&landingPath=NotLandingPage&groups=C0001%3A1%2CC0002%3A1%2CC0003%3A1%2CC0008%3A1%2CC0012%3A0&AwaitingReconsent=false; AMP_f6db63e17b=JTdCJTIyb3B0T3V0JTIyJTNBZmFsc2UlMkMlMjJkZXZpY2VJZCUyMiUzQSUyMmJmYzhmNWU0LTczNzktNGU2Yy1hMThjLTg4MmJkMTcwYzQ0MiUyMiUyQyUyMnNlc3Npb25JZCUyMiUzQTE3MjUwNjI0NTMzMjclMkMlMjJ1c2VySWQlMjIlM0ElMjI0NTUwNzA3MCUyMiUyQyUyMmxhc3RFdmVudFRpbWUlMjIlM0ExNzI1MDYyNDUzMzUzJTdE; AWSALB=7F3+O/uMyzacjcJCSViHYsV9qSWDryPxmdMEskgkN0CBduWHsGa4lEbSkHfKa0Hes5sjI91MZFXSWcK/ASZygkZtUCTU+te4gA7fi8KURBYhq04nHYqbb/7rVgSV; AWSALBCORS=7F3+O/uMyzacjcJCSViHYsV9qSWDryPxmdMEskgkN0CBduWHsGa4lEbSkHfKa0Hes5sjI91MZFXSWcK/ASZygkZtUCTU+te4gA7fi8KURBYhq04nHYqbb/7rVgSV',
                    'dnt': '1',
                    'priority': 'u=1, i',
                    'referer': 'https://studio.code.org/projects',
                    'sec-ch-ua': '"Not;A=Brand";v="24", "Chromium";v="128"',
                    'sec-ch-ua-mobile': '?0',
                    'sec-ch-ua-platform': '"macOS"',
                    'sec-fetch-dest': 'empty',
                    'sec-fetch-mode': 'cors',
                    'sec-fetch-site': 'same-origin',
                    'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.36',
                    'x-csrf-token': '86DEUKbutjWJG77b-M37UsKiEBYkETFhL8dfECi61F3aMW5D5_einMAciuuMQTdldS920KvlZo-2FPZihatB5A',
                    'x-newrelic-id': 'UQYGVVBQGwAHXFZRAQU=',
                    'x-requested-with': 'XMLHttpRequest'
                }
            });

            if (!response.ok) {
                console.error('HTTP error', response.status);
                return;
            }

            const data = await response.json();
            console.log('Full response:', data); // Log the entire response

            // Check if contents is empty or not valid JSON
            if (!data.contents) {
                console.error('No contents found in response');
                return;
            }

            try {
                const projects = JSON.parse(data.contents); // Parse the JSON from the response
                displayProjects(projects);
            } catch (error) {
                console.error('Error parsing JSON:', error);
            }
        }

        function displayProjects(projects) {
            const grid = document.getElementById('projectGrid');
            projects.forEach(project => {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <h2>${project.name}</h2>
                    <img src="${project.thumbnailUrl}" alt="${project.name}">
                    <p>Type: ${project.type}</p>
                    <p>Updated At: ${new Date(project.updatedAt).toLocaleDateString()}</p>
                `;
                grid.appendChild(card);
            });
        }

        fetchProjects();
    </script>
</body>
</html>