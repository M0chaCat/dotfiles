<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gams - Settings</title>
<link rel="icon" type="image/png" href="img/gams-g.png">
<style>
@font-face {
  font-family: 'facon';
  src: url('assets/facon.ttf') format('truetype');
}

body {
  margin: 0;
  padding: 0;
  font-family: 'Roboto', 'Arial', 'sans-serif', 'facon';
  background: url('./assets/bg.png') no-repeat center center fixed;
  background-size: cover;
  color: #fff;
  text-align: center;
  min-height: 100vh;
}

.main-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 40px 20px;
  min-height: 100vh;
  box-sizing: border-box;
}

.content-container {
  padding: 40px;
  border-radius: 15px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  text-align: center;
  width: 80%;
  max-width: 1000px;
  margin-bottom: 40px;
}

.acrylic {
  position: relative;
  overflow: hidden;
}

.acrylic::before {
  content: '';
  position: absolute;
  z-index: -1;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  background-color: rgba(30, 30, 46, 0.7);
  filter: blur(8px);
  -webkit-filter: blur(8px);
  -moz-filter: blur(8px);
  -o-filter: blur(8px);
  -ms-filter: blur(8px);
  background-blend-mode: exclusion;
}

.acrylic::after {
  content: "";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: -1;
  background-image: url(data:image/png;base64,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);
}

.title {
  font-size: 36px;
  margin-bottom: 10px;
  font-weight: 700;
}

.switch {
  position: relative;
  display: inline-block;
  width: 60px;
  height: 34px;
}

.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  -webkit-transition: .4s;
  transition: .4s;
}

.slider:before {
  position: absolute;
  content: "";
  height: 26px;
  width: 26px;
  left: 4px;
  bottom: 4px;
  background-color: white;
  -webkit-transition: .4s;
  transition: .4s;
}

input:checked + .slider {
  background-color: #2196F3;
}

input:focus + .slider {
  box-shadow: 0 0 1px #2196F3;
}

input:checked + .slider:before {
  -webkit-transform: translateX(26px);
  -ms-transform: translateX(26px);
  transform: translateX(26px);
}

.slider.round {
  border-radius: 34px;
}

.slider.round:before {
  border-radius: 50%;
}

select, input[type="text"], input[type="file"], button {
  background-color: rgba(255, 255, 255, 0.2);
  border: none;
  padding: 10px;
  border-radius: 5px;
  color: #fff;
  margin: 5px;
}

select:focus, input[type="text"]:focus, input[type="file"]:focus, button:focus {
  outline: none;
  box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.5);
}

button {
  cursor: pointer;
  transition: background-color 0.3s;
}

button:hover {
  background-color: rgba(255, 255, 255, 0.3);
}

.preset-images {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  margin-top: 20px;
}

.preset-images img {
  width: 50px;
  height: 50px;
  margin: 5px;
  cursor: pointer;
  border-radius: 5px;
  transition: transform 0.3s;
}

.preset-images img:hover {
  transform: scale(1.1);
}

</style>
<script src='i.js'></script>
</head>
<body onload="setSavedTheme()">
<div class="main-container">
  <div class="content-container acrylic">
    <h1 class="title">Gams - Settings</h1>

    

    <br><br>

    <label>Open Gam Mode:</label>
    <select onchange='changeGamMode(this)' id='gamMode'>
      <option value="embed">In this tab</option>
      <option value="gam">In new tab</option>
      <option value="blank">In an about:blank tab</option>
      <option value="direct">Replace this tab</option>
      <option value="raw">Raw link in new tab</option>
    </select>

    <br><br>

    <label>Display the popout menu with mode "In new tab" from:</label>
    <select onchange='changePopoutMode(this)' id='popoutMode'>
      <option value="top">Select</option>
      <option value="top">Top</option>
      <option value="bottom">Bottom</option>
      <option value="left">Left</option>
      <option value="right">Right</option>
    </select>

    <br><br>

    <h2>Disguise:</h2>
    <p><i>This allows you to disguise this site as a different site.</i></p>
    <label>Tab Name:</label>
    <input id="tabName" type="text" placeholder="Classes" autocomplete="off" readonly onfocus="this.removeAttribute('readonly');">
    <button onclick="applyTitle()">Apply Title</button>
    <br>
    <label>Tab Icon:</label>
    <input id="tabIcon" accept="image/*" type="file">
    <button onclick="applyIcon()">Apply Icon</button>
    <h3>Presets:</h3>
    <p><i>Click an image to apply that preset.</i></p>
    <div class="preset-images">
      <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABsklEQVQYV6WPMY9MYRSGnzO5K5mrsczINCujkBh3ihU1CX9BMSsKtqTQ6mzDr5BFQiLRSkRoFRu7icIQ3YoCESHL3DEbmfMqzjc3d1BxmvPlS97nPK9J4n8mm75Yvsz00zkzYTYPkwypAbJ4e2xkyBuw0LpvPzfaMpURrgMUAIhgBZGBGgGznIzpGMx4OW7xatLGbBYGJJTecoHHu2h+pZ/vgP8gQ4YQw3GbB1+OQgIgkS80kYvR7igBHLkzaImi+Q1kZKEJuJB71WDvnpy1M1dBsPb0BqNJiWpGqSWN6GRJ05ELubiwvEJ33xLdxSVWT5xHVRclw8ilCoY89STwt7fu0V08BMD687thKM1biKhgM3CtwmhScu3xdSRR7pZVuPInDicDknoA+p0eRecY/U4PgOGH12y83WT783aAHDSrIBlAquBcOXmJ00dOUZ+i02Nw/CwPh4+4+exWfMqQjExuYIDC4vdwfQ7v786FEWSoAYiiucPgwDuGb9bnQlVloCw/stJ+T5F/j4MyrHxyUKCw+NsIIK4pbbAAy8gkWwUu2uzSDKT6+jMIINkdU93xH+YXTrImgXmBBtYAAAAASUVORK5CYII=" onclick="presetDisguise(this, 'Classes')">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACt0lEQVQ4jY1TS2iUZxQ9997v/39nxsngpJqkOogPgkV84GMhtggS2k1BXSha6kIEC8WNFMEgmF+p6MKVIOLKjYr2AS2BFkoVuujGivhA0YVUQ8QuGsXRSf7H993rwlQFo/Qs7z2Hc87iAG+DprgBAGyKn5tCbP0nBj5uP+5s1aBODVRPLD+58M4Z2tK+/D43AoCV5zfOB+T62L9PakV7Ak81wua+xzg17/aY97q0+ikeTZINAPiVPH3pbgGHo1pcq9cqWZFpWfd5ufeD+1k83brZZIgAm+S+kcBAINiKc5vWcyy/w6sKE/090sZX0+/iUP8Il+qCONPgw9p4AH9ZCqYU+jrBqZURiI4SEwHQwIK5H1ZHvpn3zyMIq5kpRxSRylEzEIb+q5CCQbAVjdYOV4lWaxE8DBzF4FHqOtAYL44jEWaA/LgFV6X1xUXZQgSzFEwAsPi7zc1ppjdIuM988By72HJ/9cq2H1fZaUrKVnQtSqzf5+olZqe53hPV5fQZOgwASfCDrupmWxkCQM7MUFi5FyCjHcgilPtAIIDE5xqkTgs98x4A4CXnti1iwq4wEZTA4ESgeX72xhfDl5CmnKZgGrCf0fHDLjEiIkMGJcbu8Z/Qotbg959wqF00IwcD2Fneqi+5GaHpFQECIEfFFugtd+zel0sj7xMjhpF2UMvXEmBRz867v3FcXVfm7TCr0S2ze3tIoS9Tw8AwPCeHr68esQ0PzgRUmq6TF8M9f17ewACViPNBwzOqVIRmdtd8COOlllkR/EQZfFaGMivEZ/6Hj7b7sRl9DHruy0bYT4AJYNS50juaLNs5Y07v3DVdtS4BxcIuFpFYWGIhF0vMzGPVhhASWjP6y7fNS7cvGEBvbMFo3cFnnxPLLLAFU5AIgAAEKIjZAHXm/cM/hpq/TortXcv933gBpn4539/Ch68AAAAASUVORK5CYII=" onclick="presetDisguise(this, 'My Drive - Google Drive')">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACIklEQVQ4jYWSS0iUURTHf/fe8RvHooE2VlT2FNqUGWmNEYUR9lhEEVJhUIsoXOQuap1Rq6KHNQt3LaPAIOxhlNTChUwLMU3NR1CklUzg6xvPd1ro2KhTHjjcA/e8/uf/hzmmqsUiEheRLhHxp/2TiDxQ1aK5+ZmFeSJSrwuYiMRVNZKuMxnFz51zu9T3GX/6iPGmRqS/F5WAUMEawuUVRI5UYjwPEWl2zlUYY8YMgIjUW2vPBkPfSV6uYbKvJ+uW3rZSojfuABAEQdw5d96oajHQqr7P8IUqpL8X43lEjp3EK4mBtfgt75l4+4po7U3cytWZPbcyjUlTidv642ipDu7foX7bh2zgs92jDhHpUlWdbNmuEw15OvqweqE7ZjboCAEFADrSjs1LkRM7NAt3+bWRebfYudFx9XguwFqbwePs9z/mT/6NLdAHMBpex28W0/C1Y1Zy05VFM75nUwiAZVGT/v5sgdcA3UurOPUrxvXOFhJD7fOmdn4LeNc5NbpkfWimv5mWZ8KXFKdfXqInOYBnc6gsPEjZ8mKssbQOtvEkMczYl0oK8z3un4lgppbYkhZS3Fp7bnD0Jxeba+lODmTFviFcxq29NeRHDUEQ1DnnqtNSjohIo3Nutx+keNz9gmf9zfQkB0ChYMkK9q2KcaLwMJFQGFV9Y4w5YIwZzyBBI2lRLcD9PVXN/SdFqlokInUi0iEiE9P+UUTuqurmufl/AKTzsFGmvUNUAAAAAElFTkSuQmCC" onclick="presetDisguise(this, 'Google')">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAB+0lEQVQ4jY2TvWsUQRjGf7M7u7PZS3J3XtKKRlQsgmBlZeAqU1kIgsFCTxE7QQgB/Q9ExD8gaCki2IhgrhCLCCJYWYmVmMuHwUiO7O3u7eyOxZ63m/OzeJnhnXme95n3mVecv9O52NNjD2PteWRAZiATIytFpIABZcWR7+y1xPzSTpiD/wAYjbTYKxlHsqj8a9XGhKYxnhHGgvUtSZoKMAVBHClP7pedg2cPa66eszgx4yOEwAC73YRnL2OevpCkmRiSyEJeXnXuZMLSlQquYxNGms5mzFRdUq+6tC44fFnr8uadKhMUb675KTcXPFzHZvV9wP1Hhm7XRlqa+TMR03WzD1xSkEufOwWT4y7fd/vcXYZeYEMGWguet53fNtUqyz92EIQQfPjYpxdYf3dj4IgsJ4QBAME/bDSFnVb54NNnMMYwe9yl4mX/8RcMFmmReP0W9oKEWtVl8TpM+ilkYAvD2WbC7VsaV2aUny2alwNTZm+eTli8UcGRNmGoWdvoM3VAUqs6GGO496BLe0XlBGakB2TwatVh51uPaws2R2c8jhwaw2DY/Brz+Emf9oo7BINANC/tV1Bu0nQjoT6REQSC9Y6D0YNvbsTgEkhlx1GslTckKHV4e8the6M8Hz8r52Cl4sjynbCl7CganbQiShNqhiajVBz5ftD6ATaARn+sBDd0AAAAAElFTkSuQmCC" onclick="presetDisguise(this, 'Clever | Portal')">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAdElEQVQ4jWN0bvse////nwkMDIwCDKSBB4yMzA2MTm1f7jP8Z1AgUTMMfGCiQDMDAwODAAsyb28VN1G6nNu+wtlMFNjOwMDAwIDiAmSTiQXUdcFoGOAPA1yuGxxh8IECBzxgYmBgKGRgZHhAut7/HxgYGBoB3s8g7yv6EgQAAAAASUVORK5CYII=" onclick="presetDisguise(this, 'Google Docs')">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACEUlEQVQ4jcWSP0jUYRjHP8/7/t7z/JelHAhJEN2QUmKFp1DkkIVubVK0NCSI0ODWdksNQRQJQhq0NQQ1ZYM5aIiY1iZEdIKQQ/BT01S8636/92nIjgyusb7Ld/n+4fnywP+GAMw2NdW7hO3cNW7hfC4X/s2gr0jFB2z7znY8V9fDusmC0YQddcaMO1+c+nDqeFc589adxq6oIpiyVsargmBUsxiTSaediQsn86pYkZbqZMX42sXMkGYxpdYsJjzXOaTLdeOBo4U8BBq3ksEFd699kitvbsRtyxNE6sFItRO5tzrTnvlyyd0EWJ0pPnQJ+rw3+MhjRJj43hS9XLpMAPD0wjBLuRf0zN7G+oiCT1Ahpi8ffW8FqLC2Oe89VXi21DG808rzrSNsp3OYynrUasxcy1Ue9z7RsOZwmMST957AmObAmOa89ySN8FmT4eDGWX22e4xg78A9UlxUYKXxNPczDwYo5kecCAoo4ESQOBq51XZ0YDFqIClxadjSUABOI/lYk16rnV4cjNB+gU2BzQjtr51+P5hrDNYSovK7Z18AQKUvWIDU5MJYLHTHQndqcmEMoDLC/qkPfrGIART1cakh9Xr+3T6194KzIILGP72mY52iIvMeH3r1obW2UO6RxJgCsQ9RH+J1PtfbUQyyWfFnHun1hm8cAljZYaNcwLaVtweD+ARAYSv1Fcn6ctp/hx+qpdgPE5JfygAAAABJRU5ErkJggg==" onclick="presetDisguise(this, 'Drafts (24) -  G-Mail')">
    </div>
  </div>
</div>

<script>
const BroadcastDisguise = new BroadcastChannel('BroadcastDisguise');

function getStoredJSON(key, data) {
  if (data && data.key && (localStorage[key] != 'null')) {
    var inStore = JSON.parse(localStorage[key]);
    if ((typeof inStore == 'object') && inStore.hasOwnProperty(data.key)) {
      return inStore[data.key];
    }
  }
  if (localStorage[key] && !data) {
    return JSON.parse(localStorage[key]);
  }
  return null;
}

function storeJSON(key, data) {
  if (localStorage[key]) {
    var inStore = JSON.parse(localStorage[key]) || {};
    inStore[data.key] = data.value;
    localStorage[key] = JSON.stringify(inStore);
  } else {
    var inStore = {};
    inStore[data.key] = data.value;
    localStorage[key] = JSON.stringify(inStore);
  }
  return localStorage[key];
}

function changeTheme(input) {
  var wantsDarkMode = (input.checked);
  if (wantsDarkMode) {
    setDark();
    storeJSON('gams', {
      key: 'theme',
      value: 'dark'
    })
  } else {
    setLight();
    storeJSON('gams', {
      key: 'theme',
      value: 'light'
    })
  }
}

function changeGamMode(input) {
  storeJSON('gams', {
    key: 'gamMode',
    value: input.value
  });
}

function changePopoutMode(input) {
  storeJSON('gams', {
    key: 'popoutMode',
    value: input.value
  });
}

function setSavedTheme() {
  if (getStoredJSON('gams', {key: 'gamMode'})) {
    document.getElementById('gamMode').value = getStoredJSON('gams', {key: 'gamMode'});
  }
  if (getStoredJSON('gams', {key: 'popoutMode'})) {
    document.getElementById('popoutMode').value = getStoredJSON('gams', {key: 'popoutMode'});
  }
  if (getStoredJSON('gams') && getStoredJSON('gams', {key: 'theme'})) {
    var theme = getStoredJSON('gams', {key: 'theme'});
    if (theme == 'light') {
      setLight();
      document.getElementById('darkModeInput').checked = false;
    } else if (theme == 'dark') {
      setDark();
      document.getElementById('darkModeInput').checked = true;
    }
  } else {
    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
      document.getElementById('darkModeInput').checked = true;
    } else {
      document.getElementById('darkModeInput').checked = false;
    }
  }
}

function setLight() {
  document.documentElement.style.setProperty('--nc-tx-1', "#000000");
  document.documentElement.style.setProperty('--nc-tx-2', "#1A1A1A");
  document.documentElement.style.setProperty('--nc-bg-1', "#FFFFFF");
  document.documentElement.style.setProperty('--nc-bg-2', "#F6F8FA");
  document.documentElement.style.setProperty('--nc-bg-3', "#E5E7EB");
  document.documentElement.style.setProperty('--nc-lk-1', "#0070F3");
  document.documentElement.style.setProperty('--nc-lk-2', "#0366D6");
  document.documentElement.style.setProperty('--nc-lk-tx', "#FFFFFF");
  document.documentElement.style.setProperty('--nc-ac-1', "#79FFE1");
  document.documentElement.style.setProperty('--nc-ac-tx', "#0C4047");
}

function setDark() {
  document.documentElement.style.setProperty('--nc-tx-1', "#ffffff");
  document.documentElement.style.setProperty('--nc-tx-2', "#eeeeee");
  document.documentElement.style.setProperty('--nc-bg-1', "#000000");
  document.documentElement.style.setProperty('--nc-bg-2', "#111111");
  document.documentElement.style.setProperty('--nc-bg-3', "#222222");
  document.documentElement.style.setProperty('--nc-lk-1', "#3291FF");
  document.documentElement.style.setProperty('--nc-lk-2', "#0070F3");
  document.documentElement.style.setProperty('--nc-lk-tx', "#FFFFFF");
  document.documentElement.style.setProperty('--nc-ac-1', "#7928CA");
  document.documentElement.style.setProperty('--nc-ac-tx', "#FFFFFF");
}

function setFavicon(href) {
  var existFav = document.querySelectorAll('link[rel*="icon"]');
  existFav.forEach(function(favicon) {
    favicon.parentNode.removeChild(favicon);
  });

  var link = document.createElement('link');
  link.type = 'image/x-icon';
  link.rel = 'icon';
  link.href = href;
  document.getElementsByTagName('head')[0].appendChild(link);
}

function applyTitle() {
  var title = document.getElementById('tabName').value;
  storeJSON('gams', {
    key: 'title',
    value: title
  });
  document.title = title;
  BroadcastDisguise.postMessage('update');
}

function applyIcon() {
  var input = document.getElementById('tabIcon');
  var file = input.files[0];
  if (file) {
    var reader = new FileReader();
    reader.onload = function(e) {
      var icon = e.target.result;
      storeJSON('gams', {
        key: 'icon',
        value: icon
      });
      setFavicon(icon);
      BroadcastDisguise.postMessage('update');
    };
    reader.readAsDataURL(file);
  }
}

function presetDisguise(img, title) {
  storeJSON('gams', {
    key: 'icon',
    value: img.src
  });
  storeJSON('gams', {
    key: 'title',
    value: title
  });
  setFavicon(img.src);
  document.title = title;
  BroadcastDisguise.postMessage('update');
}

window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
  var newColorScheme = event.matches ? "dark" : "light";
  if (newColorScheme == 'dark') {
    document.getElementById('darkModeInput').checked = true;
  }
  if (newColorScheme == 'light') {
    document.getElementById('darkModeInput').checked = false;
  }
});
</script>
</body>
</html>